<!DOCTYPE html>
<html>
<head>
    <style>
        /* Add any necessary styling here */
    </style>
</head>
<body>
    <div id="chart-container" style="width: 100%; height: 500px; position: relative;"></div>
    <div>
        <label for="datetime-input">Jump to Datetime:</label>
        <input type="datetime-local" id="datetime-input" />
        <button id="jump-button">Jump</button>
    </div>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <script>
        const chartContainer = document.getElementById('chart-container');
        const chart = LightweightCharts.createChart(chartContainer, { width: 600, height: 400 });
        const series = chart.addCandlestickSeries();

        series.setData([
            { time: '2024-11-28T03:45:00', open: 1.05, high: 1.1, low: 1.03, close: 1.06 },
            { time: '2024-11-28T04:00:00', open: 1.06, high: 1.09, low: 1.04, close: 1.05 },
            { time: '2024-11-28T04:15:00', open: 1.05, high: 1.08, low: 1.02, close: 1.03 },
            { time: '2024-11-28T04:30:00', open: 1.03, high: 1.07, low: 1.01, close: 1.02 },
        ]);

        // Helper function to simulate crosshair movement
        function moveCrosshairToCandle(time) {
            const logicalIndex = series.data().findIndex(data => data.time === time);
            if (logicalIndex !== -1) {
                chart.setCrosshairPosition({ time: time });
            }
        }

        // Handle jump functionality
        document.getElementById('jump-button').addEventListener('click', () => {
            const datetimeInput = document.getElementById('datetime-input').value;
            if (!datetimeInput) return;

            const jumpTime = new Date(datetimeInput).toISOString();
            const closestData = series.data().find(data => data.time === jumpTime);

            if (closestData) {
                chart.timeScale().setVisibleRange({ from: jumpTime, to: jumpTime });
                // Simulate crosshair
                moveCrosshairToCandle(jumpTime);
            } else {
                alert('No data for the selected time');
            }
        });
    </script>
</body>
</html>
